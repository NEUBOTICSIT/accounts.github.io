{% extends 'Accounting_Software_App/base_code/base.html' %}
{% block content %}
{% include "Accounting_Software_App/head_content.html" %}
{% load static %}
<main class="content">
	<div class="container-fluid p-0">
        <div class="row mb-4">
			<div class="col-6">
				<h1 class="h3 mb-3">Users </h1>
			</div>
			<div class="col-6" style="text-align:right"> 
				<a href="{% url 'Accounting_Software_App:create_user' user_id org_id company_id %}"><button class="btn btn-success">Add new</button></a>
			</div>
			<div class="row ">
				<div class="col-12 mb-2 " style="text-align:center">
					{%for message in messages %}
						<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
							<strong>Messages:</strong>{{ message }}
							<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
					{% endfor %}
				</div>
			</div>
		</div>
		{% if users %}
			{% comment %} <div class="row">
			    <div class="col-12">
					<div class="card">
						<div class="card-header">
						    <table class="table sortable" id="myTable" >
								<thead class="thead-dark" style="text-align:center">
									<tr class="table-dark">
										<th scope="col"><label class="form-check form-check-inline"><input class="form-check-input mt-3" type="checkbox" value=""></label></th>
										<th scope="col"><i class="align-middle me-2" data-feather="user"></i>Name <i class="fas fa-sort"  style="cursor: pointer"></th>
										<th scope="col"><i class="align-middle me-2" data-feather="mail"></i>Email <i class="fas fa-sort"  style="cursor: pointer"></th>
										<th scope="col"><i class="align-middle me-2" data-feather="user-check"></i>Roles <i class="fas fa-sort"  style="cursor: pointer"></th>
										<th scope="col"><i class="align-middle me-2" data-feather="toggle-left"></i>Enabled </th>
										<th scope="col"><i class="align-middle me-2" data-feather="edit"></i>Action </th>
									</tr>
								</thead>
								<tbody>
									{% for user in users %}
										<tr>
										    <td scope="col"><input class="form-check-input" type="checkbox" value=""></td>
											<td>{{user.first_name }} 	{{user.last_name}}</td>
											<td>{{user.email}}</td>
											<td>{{user.role}}</td>
											<td>
												<div class="form-check form-switch">
													{% if user.enable == 1 %}
														<input class="form-check-input" type="checkbox" role="switch" value="True" name="enable" id="flexSwitchCheckDefault" checked>
													{% else %}
													    <input class="form-check-input" type="checkbox" role="switch" value="True" name="enable" id="flexSwitchCheckDefault" >
													{% endif %}
												</div>
											</td>
											<td>
											    <div class="dropdown">
													<a class="btn btn-LIGHT" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">...</a>
													<ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
														<li><a class="dropdown-item" href="{% url 'Accounting_Software_App:edit_user' user_id org_id company_id user.id %}">Edit</a></li>
														<li>
															<form action="{% url 'Accounting_Software_App:delete_user' user_id org_id company_id user.id %}" method="POST">{% csrf_token %}
															<input class="dropdown-item" type="submit" value="delete" style="border:none;background-color:white" onclick="return confirm('Do you want to delete the record?');">
															</form>			
														</li>
													</ul>
												</div>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>						
						</div>								
					</div>
				</div>
			</div> {% endcomment %}

            <div class="row">
				<div class="col-12 col-lg-12 col-xxl-12 d-flex">
					<div class="card flex-fill">
						<table class="table table-hover my-0 sortable"  id="myTable">
							<thead>
								<tr class="table-dark">
									<th scope="col"><input class="form-check-input" type="checkbox" value=""></th>
									<th scope="col"><i class="align-middle me-2" data-feather="user"></i>Name <i class="fas fa-sort"  style="cursor: pointer"></th>
									<th scope="col"><i class="align-middle me-2" data-feather="mail"></i>Email <i class="fas fa-sort"  style="cursor: pointer"></th>
									<th scope="col"><i class="align-middle me-2" data-feather="user-check"></i>Roles <i class="fas fa-sort"  style="cursor: pointer"></th>
									<th scope="col"><i class="align-middle me-2" data-feather="toggle-left"></i>Enabled </th>
									<th scope="col"><i class="align-middle me-2" data-feather="edit"></i>Action </th>
								</tr>
							</thead>
							<tbody>
							{% for user in users %}
								<tr>
									<td scope="col"><input class="form-check-input" type="checkbox" value=""></td>
									<td>{{user.first_name }} 	{{user.last_name}}</td>
									<td>{{user.email}}</td>
									<td>{{user.role}}</td>
									<td>
										<div class="form-check form-switch">
											{% if user.enable == 1 %}
												<input class="form-check-input" type="checkbox" role="switch" value="True" name="enable" id="flexSwitchCheckDefault" checked>
											{% else %}
												<input class="form-check-input" type="checkbox" role="switch" value="True" name="enable" id="flexSwitchCheckDefault" >
											{% endif %}
										</div>
									</td>
									<td>
										<div class="dropdown">
											<a class="btn btn-LIGHT" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">...</a>
											<ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
												<li><a class="dropdown-item" href="{% url 'Accounting_Software_App:edit_user' user_id org_id company_id user.id %}">Edit</a></li>
												<li>
													<form action="{% url 'Accounting_Software_App:delete_user' user_id org_id company_id user.id %}" method="POST">{% csrf_token %}
														<input class="dropdown-item" type="submit" value="delete" style="border:none;background-color:white" onclick="return confirm('Do you want to delete the record?');">
													</form>			
												</li>
											</ul>
										</div>
									</td>
								</tr>
							{% endfor %}
						    </tbody>
						</table>
					</div>
				</div>
			</div>
		{% else %}
		    <div class="row">
			    <div class="col-12">
					<h3 class="text-center alert alert-warning">No Records</h3>
				</div>
			</div>
		{% endif %}
	</div>
</main>

{% endblock content %}
